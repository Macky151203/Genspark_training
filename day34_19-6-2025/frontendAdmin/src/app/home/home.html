<div class="container py-4">

  <!-- Search Bar -->
  <section class="d-flex justify-content-center mb-4">
    <input type="text" class="form-control w-50" placeholder="Search events..." [(ngModel)]="searchText" />
  </section>

  <!-- Filters and Events -->
  <section class="row g-4">
    <!-- Filters -->
    <div class="col-md-3">
      <div class="p-3 border rounded shadow-sm bg-light">
        <h5>Filters
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
            class="bi bi-filter m-1" viewBox="0 0 16 16">
            <path
              d="M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5" />
          </svg>
        </h5>

        <!-- Price Filter -->
        <div class="mb-3">
          <label class="form-label">Min Price</label>
          <input type="number" class="form-control" [(ngModel)]="filters.minPrice" placeholder="e.g. 100" />
        </div>

        <!-- Max Price -->
        <div class="mb-3">
          <label class="form-label">Max Price</label>
          <input type="number" class="form-control" [(ngModel)]="filters.maxPrice" placeholder="e.g. 1000" />
        </div>

        <!-- Category Filter -->
        <div class="mb-3">
          <label class="form-label">Category</label>
          <select class="form-select" [(ngModel)]="filters.category">
            <option value="">All</option>
            <option *ngFor="let c of categories" [value]="c">{{ c }}</option>
          </select>
        </div>

        <!-- Location Filter -->
        <div class="mb-3">
          <label class="form-label">Location</label>
          <select class="form-select" [(ngModel)]="filters.city">
            <option value="">All</option>
            <option *ngFor="let c of cities" [value]="c">{{ c }}</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Event Cards  -->
    <div class="col-md-9">
      <div class="event-scroll-container row g-3">
        <div class="col-md-4" *ngFor="let event of filteredEvents()">
          <div class="card h-100">
            <img class="rounded-top card-img-fixed" [src]="event.imageurl" alt="error" />
            <div class="card-body d-flex flex-column justify-content-between">
              <!-- Title & Category or Cancelled Badge -->
              <div class="d-flex justify-content-between align-items-start mb-3">
                <h5 class="card-title mb-0">{{ event.title }}</h5>
                <span *ngIf="event.isCancelled" class="badge bg-secondary">Cancelled</span>
                <span *ngIf="!event.isCancelled" class="badge bg-danger bg-opacity-50">{{ event.category.name }}</span>
              </div>

              <!-- Edit Button & Price -->
              <div class="d-flex justify-content-between align-items-center mt-auto pt-2 border-top">
                <button *ngIf="!event.isCancelled" (click)="handleBookNow(event.id)" class="btn btn-danger btn-sm mt-2">
                  Edit Event
                </button>
                <p class="mt-2 mb-0 fw-semibold text-dark">â‚¹{{ event.price }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
